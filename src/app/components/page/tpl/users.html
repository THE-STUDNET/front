<div class="col_left">
    <div class="sticky">
       <div class="box page_actions" ng-if="PageCtrl.editable">

           <h1 class="title">Tools</h1>
               <div class="cta light"
                    ng-click="PageCtrl.edit($event, null, PageCtrl.page.datum)"
                    ng-if="PageCtrl.config.isDisplayed(PageCtrl.page_fields.users)">
                   <div class="i16 i-useradd"></div>
                   <div>{{ ::PageCtrl.page.datum.type === 'event' ? "Invite " : "Add " }} {{ PageCtrl.page.datum.type === 'course' || PageCtrl.page.datum.type === 'organization' ? 'participants' : 'users' }} </div>
               </div>
               <div class="cta light"
                    ng-click="PageCtrl.edit($event, null, PageCtrl.page.datum, 'MULTIPLE')"
                    ng-if="PageCtrl.config.isDisplayed(PageCtrl.page_fields.import)">
                   <div class="i16 i-useradd"></div>
                   <div>Import {{ PageCtrl.page.datum.type === 'course' || PageCtrl.page.datum.type === 'organization' ? 'participants' : 'users' }} </div>
               </div>

            <div class="send_invitations" ng-if="PageCtrl.editable && PageCtrl.page.datum.type === 'organization' && PageCtrl.users.unsent.length">

                <div>{{ PageCtrl.users.unsent.length }} new user{{ PageCtrl.users.unsent.length > 1 ? 's are ' : ' is '}} waiting for their invitation. </div>
                <button class="cta green" ng-click="PageCtrl.sendPassword(null, PageCtrl.page.datum.id)">
                    <span>Send invitation{{ PageCtrl.users.unsent.length > 1 ? 's ':' '}} now</span>
                </button>
            </div>
       </div>
    </div>
</div>
<div class="col_center">
   
    <div class="box">
        <div class="filter filter-block page_filters">
            <div class="name">Roles</div>
            <div dropdown class="classic right">
                <button class="white cta dropdown" dropdown-toggle >
                    <div ui-sref="lms.page.users.all({ id : PageCtrl.page.datum.id, type : PageCtrl.label  })"
                        ng-if="PageCtrl.users.all.length"
                        ui-sref-active="show">All ({{ PageCtrl.users.all.length }})</div>
                    <div ui-sref="lms.page.users.admin({ id : PageCtrl.page.datum.id, type : PageCtrl.label  })"
                        ng-if="PageCtrl.users.administrators.length"
                        ui-sref-active="show">Administrators ({{ PageCtrl.users.administrators.length }})</div>
                     <div ui-sref="lms.page.users.attendees({ id : PageCtrl.page.datum.id, type : PageCtrl.label  })"
                        ng-if="PageCtrl.users.members.length"
                        ui-sref-active="show">Attendees ({{ PageCtrl.users.members.length }})</div>
                     <div ui-sref="lms.page.users.pending({ id : PageCtrl.page.datum.id, type : PageCtrl.label  })"
                        ng-if="PageCtrl.editable"
                        ui-sref-active="show">Pending ({{ PageCtrl.users.pending.length }})</div>
                     <div ui-sref="lms.page.users.invited({ id : PageCtrl.page.datum.id, type : PageCtrl.label  })"
                        ng-if="PageCtrl.users.invited.length && PageCtrl.editable"
                        ui-sref-active="show">Invited ({{ PageCtrl.users.invited.length }})</div>
                        <span class="i12 i-dropdown"></span>
                </button>
                <div dropdown-content>
                    <a ui-sref="lms.page.users.all({ id : PageCtrl.page.datum.id, type : PageCtrl.label  })"
                        ng-if="PageCtrl.users.all.length"
                        ui-sref-active="hide">All ({{ PageCtrl.users.all.length }})</a>
                    <a ui-sref="lms.page.users.admin({ id : PageCtrl.page.datum.id, type : PageCtrl.label  })"
                        ng-if="PageCtrl.users.administrators.length"
                        ui-sref-active="hide">Administrators ({{ PageCtrl.users.administrators.length }})</a>
                     <a  ui-sref="lms.page.users.attendees({ id : PageCtrl.page.datum.id, type : PageCtrl.label  })"
                        ng-if="PageCtrl.users.members.length"
                        ui-sref-active="hide">Attendees ({{ PageCtrl.users.members.length }})</a>
                     <a ui-sref="lms.page.users.pending({ id : PageCtrl.page.datum.id, type : PageCtrl.label  })"
                        ng-if="PageCtrl.editable"
                        ui-sref-active="hide">Pending ({{ PageCtrl.users.pending.length }})</a>
                     <a ui-sref="lms.page.users.invited({ id : PageCtrl.page.datum.id, type : PageCtrl.label })"
                        ng-if="PageCtrl.users.invited.length && PageCtrl.editable"
                        ui-sref-active="hide">Invited ({{ PageCtrl.users.invited.length }})</a>
                </div>
            </div>
            <div class="name">Sort by</div>
            <div dropdown class="classic right">
                <button class="white cta dropdown" dropdown-toggle>
                    {{ PageCtrl.order.type === 'name' ? 'Last name' : 'Institution' }}
                    <span class="i12 i-dropdown"></span>
                </button>
                <div dropdown-content>
                    <button ng-if="PageCtrl.order.type !== 'name'" 
                            ng-click="PageCtrl.order.type = 'name';PageCtrl.searchUsers();"  >
                            Last name
                    </button>
                    <button ng-if="PageCtrl.order.type !== 'organization'" 
                            ng-click="PageCtrl.order.type= 'organization';PageCtrl.searchUsers();">
                            Institution
                    </button>
                </div>
            </div>
        </div>
        <div class="search-bar">
            <label class="i16 i-search"  title="Search" for="communityinput">
               <span class="for_screen_reader">Search</span>
           </label>
           <input ng-model="PageCtrl.search" id="searchUsers" name="search"
                  ng-change="PageCtrl.searchUsers()"
                  placeholder="Search participants..." >
           <button class="i16 i-x"  title="Empty search bar"
                   ng-if="PageCtrl.search"
                    ng-click="PageCtrl.clearSearch();">
               <span class="for_screen_reader">Empty search bar</span>
           </button>
        </div>
        <div  ui-view>
        </div>
    </div>
</div>
